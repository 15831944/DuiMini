/************************************************************************
Copyright (c) 2017 MXWXZ
************************************************************************/
#include "stdafx.h"
#include "DuiMini.h"
#include "UISystem.h"

namespace DuiMini {
/************************************************************************
静态成员初始化
************************************************************************/
HINSTANCE UISystem::instance_;

/************************************************************************
初始化DuiMini库
************************************************************************/
void UISystem::Init(HINSTANCE inst) {
    _tsetlocale(LC_ALL, _T(""));
    SetInstance(inst);
}

/************************************************************************
清理（不退出）
************************************************************************/
void UISystem::Cleanup() {
}

/************************************************************************
安全地退出程序
const int code：退出值 默认为0
************************************************************************/
void UISystem::Exit(const int code /*= 0*/) {
    Cleanup();
    exit(code);
}

/************************************************************************
获取当前路径，不包含末尾\\
例如：c:\\windows\\system32
************************************************************************/
LPCTSTR UISystem::GetCurrentDir() {
    TCHAR path[MAX_PATH] = { _T('\0') };
    GetCurrentDirectory(MAX_PATH, path);
    UStr ret = path;
    return ret;
}

}   // namespace DuiMini
